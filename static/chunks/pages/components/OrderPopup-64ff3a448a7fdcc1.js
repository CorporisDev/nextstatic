(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{5515:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/OrderPopup",function(){return t(9417)}])},9417:function(e,n,t){"use strict";t.r(n);var a=t(7568),r=t(7582),s=t(5893),i=t(7294),o=t(3253),c=t.n(o);c().setAppElement("#__next");var l=function(e){var n,t=e.isOpen,o=e.onRequestClose,l=(0,i.useState)(!1),u=l[0],d=l[1],p=(0,i.useState)(null),h=p[0],m=p[1],x=(0,i.useState)([]),f=x[0],j=x[1],v=(0,i.useState)(""),g=v[0],b=v[1],y=(0,i.useState)([]),C=y[0],_=y[1],S=(0,i.useState)(""),E=S[0],N=S[1],O=(0,i.useState)(!1),P=O[0],A=O[1],w=(0,i.useState)(18e5),T=w[0],q=w[1],D=["DESCUENTO200","AHORRA200","OFERTA200"];(0,i.useEffect)(function(){fetch("/departamentos_y_ciudades.json").then(function(e){return e.json()}).then(function(e){return j(e.Colombia)}).catch(function(e){return console.error("Error al cargar los departamentos y ciudades:",e)})},[]);var R=(n=(0,a.Z)(function(e){var n;return(0,r.__generator)(this,function(t){return e.preventDefault(),d(!0),m(null),n={name:e.target.elements.name.value,apellido:e.target.elements.apellido.value,phone:e.target.elements.phone.value,address:e.target.elements.address.value,departamento:g,ciudad:e.target.elements.ciudad.value},fetch("http://195.35.36.80:3000/api/submit-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){if(d(!1),e.success)m({success:!0,message:"Felicitaciones ".concat(n.name,", tu pedido ha sido creado exitosamente!"),direccion:"Tu pedido ser\xe1 enviado a la direcci\xf3n: ".concat(n.address,", y estar\xeda llegando en 2 d\xedas h\xe1biles aproximadamente."),city:"En la ciudad de: ".concat(n.ciudad," - ").concat(n.departamento)});else throw Error(e.message)}).catch(function(e){d(!1),m({success:!1,message:e.message||"Lo siento, hubo un error en la inscripci\xf3n, por favor int\xe9ntalo nuevamente."})}),[2]})}),function(e){return n.apply(this,arguments)}),k=function(e){var n=f.find(function(n){return n.departamento===e.target.value});b(e.target.value),_(n?n.ciudades:[])},F=function(){D.includes(E)&&!P&&(q(T-2e5),A(!0))};return(0,s.jsxs)(c(),{isOpen:t,onRequestClose:o,contentLabel:"Realizar Pedido",className:"modal",overlayClassName:"overlay",children:[(0,s.jsx)("h2",{children:"Compra Ahora Con Pago Contra Entrega!"}),u?(0,s.jsx)("p",{children:"Cargando..."}):h?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:h.message}),(0,s.jsx)("p",{children:h.direccion}),(0,s.jsx)("p",{children:h.city}),(0,s.jsx)("p",{children:"\xa1Muchas gracias por tu compra!"})]}):(0,s.jsxs)("form",{onSubmit:R,children:[(0,s.jsxs)("label",{children:["Nombre:",(0,s.jsx)("input",{type:"text",name:"name",required:!0})]}),(0,s.jsxs)("label",{children:["Apellido:",(0,s.jsx)("input",{type:"text",name:"apellido",required:!0})]}),(0,s.jsxs)("label",{children:["Celular:",(0,s.jsx)("input",{type:"text",name:"phone",required:!0})]}),(0,s.jsxs)("label",{children:["Direcci\xf3n:",(0,s.jsx)("input",{type:"text",name:"address",required:!0})]}),(0,s.jsxs)("label",{children:["Departamento:",(0,s.jsxs)("select",{name:"departamento",value:g,onChange:k,children:[(0,s.jsx)("option",{value:"",children:"Seleccione un departamento"}),f.map(function(e,n){return(0,s.jsx)("option",{value:e.departamento,children:e.departamento},n)})]})]}),(0,s.jsxs)("label",{children:["Ciudad:",(0,s.jsxs)("select",{name:"ciudad",children:[(0,s.jsx)("option",{value:"",children:"Seleccione una ciudad"}),C.map(function(e,n){return(0,s.jsx)("option",{value:e,children:e},n)})]})]}),(0,s.jsxs)("label",{children:["Cup\xf3n de Descuento:",(0,s.jsx)("input",{type:"text",value:E,onChange:function(e){return N(e.target.value)}}),(0,s.jsx)("button",{className:"applyCouponButton",type:"button",onClick:F,children:"Aplicar Cup\xf3n"})]}),(0,s.jsxs)("div",{className:"order-summary",children:[(0,s.jsx)("p",{children:"Precio Original: $1.800.000"}),P&&(0,s.jsx)("p",{children:"Descuento Aplicado: -$200.000"}),(0,s.jsxs)("p",{children:["Precio Final: $",T.toLocaleString()]})]}),(0,s.jsx)("button",{className:"button-form",type:"submit",children:"Generar Pedido"})]})]})};n.default=l}},function(e){e.O(0,[787,774,888,179],function(){return e(e.s=5515)}),_N_E=e.O()}]);